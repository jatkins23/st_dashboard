<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.4 (20251115.1723)
 -->
<!-- Title: classes Pages: 1 -->
<svg width="3065pt" height="1474pt"
 viewBox="0.00 0.00 3065.00 1474.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1469.5)">
<title>classes</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1469.5 3060.75,-1469.5 3060.75,4 -4,4"/>
<!-- streettransformer.query.base.BaseQuery -->
<g id="node1" class="node">
<title>streettransformer.query.base.BaseQuery</title>
<polygon fill="none" stroke="black" points="1395.62,-293.5 1395.62,-461 1634.38,-461 1634.38,-293.5 1395.62,-293.5"/>
<text xml:space="preserve" text-anchor="start" x="1485" y="-443.7" font-family="Times,serif" font-size="14.00">BaseQuery</text>
<polyline fill="none" stroke="black" points="1395.62,-436.5 1634.38,-436.5"/>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-419.2" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-402.7" font-family="Times,serif" font-size="14.00">db</text>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-386.2" font-family="Times,serif" font-size="14.00">db_connection_func : Optional[Callable]</text>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-369.7" font-family="Times,serif" font-size="14.00">limit : int</text>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-353.2" font-family="Times,serif" font-size="14.00">use_faiss : bool</text>
<text xml:space="preserve" text-anchor="start" x="1403.62" y="-336.7" font-family="Times,serif" font-size="14.00">use_whitening : bool</text>
<polyline fill="none" stroke="black" points="1395.62,-329.5 1634.38,-329.5"/>
<text xml:space="preserve" text-anchor="start" x="1447.5" y="-313.2" font-family="Times,serif" font-style="italic" font-size="14.00">execute</text>
<text xml:space="preserve" text-anchor="start" x="1488" y="-313.2" font-family="Times,serif" font-size="14.00">(): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1447.5" y="-299.2" font-family="Times,serif" font-style="italic" font-size="14.00">get_cache_key</text>
<text xml:space="preserve" text-anchor="start" x="1527" y="-299.2" font-family="Times,serif" font-size="14.00">(): str</text>
</g>
<!-- streettransformer.config.Config -->
<g id="node6" class="node">
<title>streettransformer.config.Config</title>
<polygon fill="none" stroke="black" points="908.25,-692 908.25,-848 1345.75,-848 1345.75,-692 908.25,-692"/>
<text xml:space="preserve" text-anchor="start" x="1108.25" y="-830.7" font-family="Times,serif" font-size="14.00">Config</text>
<polyline fill="none" stroke="black" points="908.25,-823.5 1345.75,-823.5"/>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-806.2" font-family="Times,serif" font-size="14.00">cache_dir : str | Path</text>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-789.7" font-family="Times,serif" font-size="14.00">database_path : str | Path | None</text>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-773.2" font-family="Times,serif" font-size="14.00">index_dir : str | Path</text>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-756.7" font-family="Times,serif" font-size="14.00">stats_dir : str | Path</text>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-740.2" font-family="Times,serif" font-size="14.00">universe_name : str</text>
<text xml:space="preserve" text-anchor="start" x="1039.25" y="-723.7" font-family="Times,serif" font-size="14.00">vector_dim : int</text>
<polyline fill="none" stroke="black" points="908.25,-716.5 1345.75,-716.5"/>
<text xml:space="preserve" text-anchor="start" x="916.25" y="-699.2" font-family="Times,serif" font-size="14.00">from_st_preprocessing(database_path: str | Path, universe_name: str): Config</text>
</g>
<!-- streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.config.Config -->
<g id="edge9" class="edge">
<title>streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.config.Config</title>
<path fill="none" stroke="black" d="M1395.39,-456.78C1392.25,-458.41 1389.12,-459.99 1386,-461.5 1340.55,-483.58 1317.28,-466.11 1278.5,-498.5 1221,-546.53 1181.24,-622.3 1156.92,-681.45"/>
<polygon fill="black" stroke="black" points="1153.31,-690.41 1152.88,-679.45 1154.73,-686.9 1157.05,-681.13 1157.05,-681.13 1157.05,-681.13 1154.73,-686.9 1161.22,-682.81 1153.31,-690.41"/>
<text xml:space="preserve" text-anchor="middle" x="1295.75" y="-563.7" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.query.mixins.DatabaseMixin -->
<g id="node8" class="node">
<title>streettransformer.query.mixins.DatabaseMixin</title>
<polygon fill="none" stroke="black" points="1321.62,-499 1321.62,-638.5 1560.38,-638.5 1560.38,-499 1321.62,-499"/>
<text xml:space="preserve" text-anchor="start" x="1399.38" y="-621.2" font-family="Times,serif" font-size="14.00">DatabaseMixin</text>
<polyline fill="none" stroke="black" points="1321.62,-614 1560.38,-614"/>
<text xml:space="preserve" text-anchor="start" x="1329.62" y="-596.7" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1329.62" y="-580.2" font-family="Times,serif" font-size="14.00">db</text>
<text xml:space="preserve" text-anchor="start" x="1329.62" y="-563.7" font-family="Times,serif" font-size="14.00">db_connection_func : Optional[Callable]</text>
<polyline fill="none" stroke="black" points="1321.62,-556.5 1560.38,-556.5"/>
<text xml:space="preserve" text-anchor="start" x="1333" y="-539.2" font-family="Times,serif" font-size="14.00">execute_query(sql: str): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1333" y="-522.7" font-family="Times,serif" font-size="14.00">get_connection()</text>
<text xml:space="preserve" text-anchor="start" x="1333" y="-506.2" font-family="Times,serif" font-size="14.00">get_universe_table(table_name: str): str</text>
</g>
<!-- streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.query.mixins.DatabaseMixin -->
<g id="edge1" class="edge">
<title>streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.query.mixins.DatabaseMixin</title>
<path fill="none" stroke="black" d="M1482.54,-461.37C1479.09,-470.2 1475.59,-479.18 1472.15,-487.98"/>
<polygon fill="none" stroke="black" points="1468.93,-486.6 1468.55,-497.19 1475.45,-489.15 1468.93,-486.6"/>
</g>
<!-- streettransformer.embedding_db.EmbeddingDB -->
<g id="node9" class="node">
<title>streettransformer.embedding_db.EmbeddingDB</title>
<polygon fill="none" stroke="black" points="1179.88,-901.5 1179.88,-1173 2092.12,-1173 2092.12,-901.5 1179.88,-901.5"/>
<text xml:space="preserve" text-anchor="start" x="1595.12" y="-1155.7" font-family="Times,serif" font-size="14.00">EmbeddingDB</text>
<polyline fill="none" stroke="black" points="1179.88,-1148.5 2092.12,-1148.5"/>
<text xml:space="preserve" text-anchor="start" x="1594.75" y="-1131.2" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1594.75" y="-1114.7" font-family="Times,serif" font-size="14.00">schema</text>
<text xml:space="preserve" text-anchor="start" x="1594.75" y="-1098.2" font-family="Times,serif" font-size="14.00">universe_name</text>
<text xml:space="preserve" text-anchor="start" x="1594.75" y="-1081.7" font-family="Times,serif" font-size="14.00">vector_dim</text>
<polyline fill="none" stroke="black" points="1179.88,-1074.5 2092.12,-1074.5"/>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-1057.2" font-family="Times,serif" font-size="14.00">compute_change_vectors(year_from: int, year_to: int, normalize: bool): None</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-1040.7" font-family="Times,serif" font-size="14.00">fetch_embeddings_by_location(location_key: str, embedding_type: Literal[&#39;embedding&#39;, &#39;mask_embedding&#39;, &#39;fusion_embedding&#39;]): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-1024.2" font-family="Times,serif" font-size="14.00">fetch_embeddings_by_year(year: int, embedding_type: Literal[&#39;embedding&#39;, &#39;mask_embedding&#39;, &#39;fusion_embedding&#39;]): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-1007.7" font-family="Times,serif" font-size="14.00">get_embedding_count(): int</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-991.2" font-family="Times,serif" font-size="14.00">get_stats(): dict</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-974.7" font-family="Times,serif" font-size="14.00">get_years(): list[int]</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-958.2" font-family="Times,serif" font-size="14.00">insert_embeddings(embeddings: list[ImageEmbedding], on_conflict: Literal[&#39;replace&#39;, &#39;ignore&#39;]): None</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-941.7" font-family="Times,serif" font-size="14.00">search_change_vectors(query_delta: np.ndarray, limit: int, year_from: int | None, year_to: int | None): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-925.2" font-family="Times,serif" font-size="14.00">search_similar(query_vector: np.ndarray, limit: int, year: int | None, embedding_type: Literal[&#39;embedding&#39;, &#39;mask_embedding&#39;, &#39;fusion_embedding&#39;]): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1187.88" y="-908.7" font-family="Times,serif" font-size="14.00">setup_schema(create_index: bool, index_type: Literal[&#39;hnsw&#39;], drop_existing: bool): None</text>
</g>
<!-- streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.embedding_db.EmbeddingDB -->
<g id="edge11" class="edge">
<title>streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.embedding_db.EmbeddingDB</title>
<path fill="none" stroke="black" d="M1556.18,-461.49C1561.1,-473.69 1565.58,-486.27 1569,-498.5 1605.27,-628.02 1621.92,-780.59 1629.56,-890.07"/>
<polygon fill="black" stroke="black" points="1630.23,-899.98 1625.07,-890.3 1629.98,-896.2 1629.56,-890 1629.56,-890 1629.56,-890 1629.98,-896.2 1634.04,-889.69 1630.23,-899.98"/>
<text xml:space="preserve" text-anchor="middle" x="1612.31" y="-660.2" font-family="Times,serif" font-size="14.00" fill="green">db</text>
</g>
<!-- streettransformer.query.mixins.SearchMethodMixin -->
<g id="node14" class="node">
<title>streettransformer.query.mixins.SearchMethodMixin</title>
<polygon fill="none" stroke="black" points="1615.75,-515.5 1615.75,-622 1804.25,-622 1804.25,-515.5 1615.75,-515.5"/>
<text xml:space="preserve" text-anchor="start" x="1653.38" y="-604.7" font-family="Times,serif" font-size="14.00">SearchMethodMixin</text>
<polyline fill="none" stroke="black" points="1615.75,-597.5 1804.25,-597.5"/>
<text xml:space="preserve" text-anchor="start" x="1653" y="-580.2" font-family="Times,serif" font-size="14.00">limit : int</text>
<text xml:space="preserve" text-anchor="start" x="1653" y="-563.7" font-family="Times,serif" font-size="14.00">use_faiss : bool</text>
<text xml:space="preserve" text-anchor="start" x="1653" y="-547.2" font-family="Times,serif" font-size="14.00">use_whitening : bool</text>
<polyline fill="none" stroke="black" points="1615.75,-540 1804.25,-540"/>
<text xml:space="preserve" text-anchor="start" x="1623.75" y="-522.7" font-family="Times,serif" font-size="14.00">get_search_method_name(): str</text>
</g>
<!-- streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.query.mixins.SearchMethodMixin -->
<g id="edge2" class="edge">
<title>streettransformer.query.base.BaseQuery&#45;&gt;streettransformer.query.mixins.SearchMethodMixin</title>
<path fill="none" stroke="black" d="M1600.53,-461.37C1616.42,-476.81 1632.73,-492.66 1647.76,-507.27"/>
<polygon fill="none" stroke="black" points="1645.27,-509.72 1654.88,-514.18 1650.15,-504.7 1645.27,-509.72"/>
</g>
<!-- streettransformer.clip_encoding.CLIPEncoder -->
<g id="node2" class="node">
<title>streettransformer.clip_encoding.CLIPEncoder</title>
<polygon fill="none" stroke="black" points="1865.62,-58.25 1865.62,-197.75 2278.38,-197.75 2278.38,-58.25 1865.62,-58.25"/>
<text xml:space="preserve" text-anchor="start" x="2034.88" y="-180.45" font-family="Times,serif" font-size="14.00">CLIPEncoder</text>
<polyline fill="none" stroke="black" points="1865.62,-173.25 2278.38,-173.25"/>
<text xml:space="preserve" text-anchor="start" x="1873.62" y="-155.95" font-family="Times,serif" font-size="14.00">device : NoneType, str</text>
<text xml:space="preserve" text-anchor="start" x="1873.62" y="-139.45" font-family="Times,serif" font-size="14.00">model : CoCa, CustomTextCLIP, NoneType</text>
<text xml:space="preserve" text-anchor="start" x="1873.62" y="-122.95" font-family="Times,serif" font-size="14.00">model_name : str</text>
<text xml:space="preserve" text-anchor="start" x="1873.62" y="-106.45" font-family="Times,serif" font-size="14.00">pretrained : str</text>
<text xml:space="preserve" text-anchor="start" x="1873.62" y="-89.95" font-family="Times,serif" font-size="14.00">tokenizer : HFTokenizer, NoneType, SigLipTokenizer, SimpleTokenizer</text>
<polyline fill="none" stroke="black" points="1865.62,-82.75 2278.38,-82.75"/>
<text xml:space="preserve" text-anchor="start" x="1994.75" y="-65.45" font-family="Times,serif" font-size="14.00">encode(text: str): np.ndarray</text>
</g>
<!-- streettransformer.npz_cache.CacheInfo -->
<g id="node3" class="node">
<title>streettransformer.npz_cache.CacheInfo</title>
<polygon fill="none" stroke="black" points="2296.5,-50 2296.5,-206 2435.5,-206 2435.5,-50 2296.5,-50"/>
<text xml:space="preserve" text-anchor="start" x="2337.88" y="-188.7" font-family="Times,serif" font-size="14.00">CacheInfo</text>
<polyline fill="none" stroke="black" points="2296.5,-181.5 2435.5,-181.5"/>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-164.2" font-family="Times,serif" font-size="14.00">created_at : str</text>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-147.7" font-family="Times,serif" font-size="14.00">file_path : Path</text>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-131.2" font-family="Times,serif" font-size="14.00">file_size_mb : float</text>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-114.7" font-family="Times,serif" font-size="14.00">num_embeddings : int</text>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-98.2" font-family="Times,serif" font-size="14.00">vector_dim : int</text>
<text xml:space="preserve" text-anchor="start" x="2304.5" y="-81.7" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="2296.5,-74.5 2435.5,-74.5"/>
<text xml:space="preserve" text-anchor="start" x="2364.12" y="-57.2" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- streettransformer.query.queries.ChangeLocationQuery -->
<g id="node4" class="node">
<title>streettransformer.query.queries.ChangeLocationQuery</title>
<polygon fill="none" stroke="black" points="1203.75,-8.75 1203.75,-247.25 1398.25,-247.25 1398.25,-8.75 1203.75,-8.75"/>
<text xml:space="preserve" text-anchor="start" x="1239.5" y="-229.95" font-family="Times,serif" font-size="14.00">ChangeLocationQuery</text>
<polyline fill="none" stroke="black" points="1203.75,-222.75 1398.25,-222.75"/>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-205.45" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-188.95" font-family="Times,serif" font-size="14.00">db</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-172.45" font-family="Times,serif" font-size="14.00">db_connection_func : NoneType</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-155.95" font-family="Times,serif" font-size="14.00">end_year : int</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-139.45" font-family="Times,serif" font-size="14.00">limit : int</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-122.95" font-family="Times,serif" font-size="14.00">location_id : int</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-106.45" font-family="Times,serif" font-size="14.00">sequential_only : bool</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-89.95" font-family="Times,serif" font-size="14.00">start_year : int</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-73.45" font-family="Times,serif" font-size="14.00">use_faiss : bool</text>
<text xml:space="preserve" text-anchor="start" x="1211.75" y="-56.95" font-family="Times,serif" font-size="14.00">use_whitening : bool</text>
<polyline fill="none" stroke="black" points="1203.75,-49.75 1398.25,-49.75"/>
<text xml:space="preserve" text-anchor="start" x="1233.12" y="-32.45" font-family="Times,serif" font-size="14.00">execute(): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1233.12" y="-15.95" font-family="Times,serif" font-size="14.00">get_cache_key(): str</text>
</g>
<!-- streettransformer.query.queries.ChangeLocationQuery&#45;&gt;streettransformer.query.base.BaseQuery -->
<g id="edge3" class="edge">
<title>streettransformer.query.queries.ChangeLocationQuery&#45;&gt;streettransformer.query.base.BaseQuery</title>
<path fill="none" stroke="black" d="M1398.61,-241.77C1411.02,-256.12 1423.61,-270.66 1435.69,-284.61"/>
<polygon fill="none" stroke="black" points="1432.96,-286.81 1442.15,-292.08 1438.25,-282.22 1432.96,-286.81"/>
</g>
<!-- streettransformer.query.mixins.ChangeMixin -->
<g id="node5" class="node">
<title>streettransformer.query.mixins.ChangeMixin</title>
<polygon fill="none" stroke="black" points="1196.5,-307.5 1196.5,-447 1377.5,-447 1377.5,-307.5 1196.5,-307.5"/>
<text xml:space="preserve" text-anchor="start" x="1249.5" y="-429.7" font-family="Times,serif" font-size="14.00">ChangeMixin</text>
<polyline fill="none" stroke="black" points="1196.5,-422.5 1377.5,-422.5"/>
<text xml:space="preserve" text-anchor="start" x="1226.62" y="-405.2" font-family="Times,serif" font-size="14.00">end_year : int</text>
<text xml:space="preserve" text-anchor="start" x="1226.62" y="-388.7" font-family="Times,serif" font-size="14.00">location_id : int</text>
<text xml:space="preserve" text-anchor="start" x="1226.62" y="-372.2" font-family="Times,serif" font-size="14.00">sequential_only : bool</text>
<text xml:space="preserve" text-anchor="start" x="1226.62" y="-355.7" font-family="Times,serif" font-size="14.00">start_year : int</text>
<polyline fill="none" stroke="black" points="1196.5,-348.5 1377.5,-348.5"/>
<text xml:space="preserve" text-anchor="start" x="1204.5" y="-331.2" font-family="Times,serif" font-size="14.00">get_change_vector_filter(): str</text>
<text xml:space="preserve" text-anchor="start" x="1204.5" y="-314.7" font-family="Times,serif" font-size="14.00">get_temporal_key(): str</text>
</g>
<!-- streettransformer.query.queries.ChangeLocationQuery&#45;&gt;streettransformer.query.mixins.ChangeMixin -->
<g id="edge4" class="edge">
<title>streettransformer.query.queries.ChangeLocationQuery&#45;&gt;streettransformer.query.mixins.ChangeMixin</title>
<path fill="none" stroke="black" d="M1294.29,-247.56C1293.36,-264.01 1292.42,-280.59 1291.54,-296.11"/>
<polygon fill="none" stroke="black" points="1288.07,-295.52 1290.99,-305.71 1295.05,-295.92 1288.07,-295.52"/>
</g>
<!-- streettransformer.database.Database -->
<g id="node7" class="node">
<title>streettransformer.database.Database</title>
<polygon fill="none" stroke="black" points="33.75,-992.25 33.75,-1082.25 498.25,-1082.25 498.25,-992.25 33.75,-992.25"/>
<text xml:space="preserve" text-anchor="start" x="241.25" y="-1064.95" font-family="Times,serif" font-size="14.00">Database</text>
<polyline fill="none" stroke="black" points="33.75,-1057.75 498.25,-1057.75"/>
<text xml:space="preserve" text-anchor="start" x="248.75" y="-1040.45" font-family="Times,serif" font-size="14.00">config</text>
<polyline fill="none" stroke="black" points="33.75,-1033.25 498.25,-1033.25"/>
<text xml:space="preserve" text-anchor="start" x="41.75" y="-1015.95" font-family="Times,serif" font-size="14.00">connect(read_only: bool): Generator[duckdb.DuckDBPyConnection, None, None]</text>
<text xml:space="preserve" text-anchor="start" x="41.75" y="-999.45" font-family="Times,serif" font-size="14.00">execute_query(query: str, read_only: bool)</text>
</g>
<!-- streettransformer.config.Config&#45;&gt;streettransformer.database.Database -->
<g id="edge15" class="edge">
<title>streettransformer.config.Config&#45;&gt;streettransformer.database.Database</title>
<path fill="none" stroke="black" d="M907.92,-776.18C780.33,-785.82 618.86,-809.64 485.5,-866.5 421.57,-893.76 359.99,-944.2 318.41,-983.04"/>
<polygon fill="none" stroke="black" points="318.43,-983.02 316.83,-990.05 309.72,-991.27 311.33,-984.24 318.43,-983.02"/>
<text xml:space="preserve" text-anchor="middle" x="502.75" y="-869.7" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.config.Config&#45;&gt;streettransformer.embedding_db.EmbeddingDB -->
<g id="edge16" class="edge">
<title>streettransformer.config.Config&#45;&gt;streettransformer.embedding_db.EmbeddingDB</title>
<path fill="none" stroke="black" d="M1275.59,-848.43C1303.95,-863.21 1334.44,-879.1 1365.25,-895.16"/>
<polygon fill="none" stroke="black" points="1365.17,-895.11 1372.34,-894.34 1375.81,-900.66 1368.64,-901.43 1365.17,-895.11"/>
<text xml:space="preserve" text-anchor="middle" x="1353.16" y="-869.7" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.faiss_index.FAISSIndexer -->
<g id="node10" class="node">
<title>streettransformer.faiss_index.FAISSIndexer</title>
<polygon fill="none" stroke="black" points="898.38,-1234.75 898.38,-1456.75 1543.62,-1456.75 1543.62,-1234.75 898.38,-1234.75"/>
<text xml:space="preserve" text-anchor="start" x="1182" y="-1439.45" font-family="Times,serif" font-size="14.00">FAISSIndexer</text>
<polyline fill="none" stroke="black" points="898.38,-1432.25 1543.62,-1432.25"/>
<text xml:space="preserve" text-anchor="start" x="1179.75" y="-1414.95" font-family="Times,serif" font-size="14.00">cache</text>
<text xml:space="preserve" text-anchor="start" x="1179.75" y="-1398.45" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1179.75" y="-1381.95" font-family="Times,serif" font-size="14.00">index_dir</text>
<text xml:space="preserve" text-anchor="start" x="1179.75" y="-1365.45" font-family="Times,serif" font-size="14.00">universe_name</text>
<text xml:space="preserve" text-anchor="start" x="1179.75" y="-1348.95" font-family="Times,serif" font-size="14.00">vector_dim</text>
<polyline fill="none" stroke="black" points="898.38,-1341.75 1543.62,-1341.75"/>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1324.45" font-family="Times,serif" font-size="14.00">build_index(year: int, index_type: IndexType, embedding_type: str, force_rebuild: bool, use_cache: bool): Path</text>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1307.95" font-family="Times,serif" font-size="14.00">delete_index(year: int, index_type: str): bool</text>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1291.45" font-family="Times,serif" font-size="14.00">get_index_info(year: int, index_type: str): IndexInfo | None</text>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1274.95" font-family="Times,serif" font-size="14.00">list_indexes(): list[IndexInfo]</text>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1258.45" font-family="Times,serif" font-size="14.00">load_index(year: int, index_type: str): None</text>
<text xml:space="preserve" text-anchor="start" x="906.38" y="-1241.95" font-family="Times,serif" font-size="14.00">search(query_vector: np.ndarray, k: int, year: int | None, index_type: str, nprobe: int, ef_search: int): pd.DataFrame</text>
</g>
<!-- streettransformer.config.Config&#45;&gt;streettransformer.faiss_index.FAISSIndexer -->
<g id="edge17" class="edge">
<title>streettransformer.config.Config&#45;&gt;streettransformer.faiss_index.FAISSIndexer</title>
<path fill="none" stroke="black" d="M1119.06,-848.34C1112.88,-930.34 1109.35,-1063.03 1136.5,-1173.5 1140.54,-1189.95 1146.34,-1206.66 1153.03,-1222.86"/>
<polygon fill="none" stroke="black" points="1152.96,-1222.7 1159,-1226.64 1157.69,-1233.73 1151.65,-1229.79 1152.96,-1222.7"/>
<text xml:space="preserve" text-anchor="middle" x="1153.75" y="-1032.2" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.npz_cache.NPZCache -->
<g id="node13" class="node">
<title>streettransformer.npz_cache.NPZCache</title>
<polygon fill="none" stroke="black" points="586.88,-934.5 586.88,-1140 1091.12,-1140 1091.12,-934.5 586.88,-934.5"/>
<text xml:space="preserve" text-anchor="start" x="809.38" y="-1122.7" font-family="Times,serif" font-size="14.00">NPZCache</text>
<polyline fill="none" stroke="black" points="586.88,-1115.5 1091.12,-1115.5"/>
<text xml:space="preserve" text-anchor="start" x="797.75" y="-1098.2" font-family="Times,serif" font-size="14.00">cache_dir</text>
<text xml:space="preserve" text-anchor="start" x="797.75" y="-1081.7" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="797.75" y="-1065.2" font-family="Times,serif" font-size="14.00">universe_name</text>
<text xml:space="preserve" text-anchor="start" x="797.75" y="-1048.7" font-family="Times,serif" font-size="14.00">vector_dim</text>
<polyline fill="none" stroke="black" points="586.88,-1041.5 1091.12,-1041.5"/>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-1024.2" font-family="Times,serif" font-size="14.00">build_from_db(year: int | None, embedding_type: str, force_rebuild: bool): dict[int, Path]</text>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-1007.7" font-family="Times,serif" font-size="14.00">delete_cache(year: int, embedding_type: str): bool</text>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-991.2" font-family="Times,serif" font-size="14.00">get_cache_info(year: int, embedding_type: str): CacheInfo | None</text>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-974.7" font-family="Times,serif" font-size="14.00">list_caches(): list[CacheInfo]</text>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-958.2" font-family="Times,serif" font-size="14.00">load(year: int, embedding_type: str): dict[str, Any]</text>
<text xml:space="preserve" text-anchor="start" x="594.88" y="-941.7" font-family="Times,serif" font-size="14.00">validate_cache(year: int, embedding_type: str): bool</text>
</g>
<!-- streettransformer.config.Config&#45;&gt;streettransformer.npz_cache.NPZCache -->
<g id="edge18" class="edge">
<title>streettransformer.config.Config&#45;&gt;streettransformer.npz_cache.NPZCache</title>
<path fill="none" stroke="black" d="M1042.92,-848.43C1016.82,-872.48 987.52,-899.46 959.44,-925.32"/>
<polygon fill="none" stroke="black" points="959.47,-925.3 957.76,-932.31 950.64,-933.43 952.34,-926.42 959.47,-925.3"/>
<text xml:space="preserve" text-anchor="middle" x="1034.52" y="-869.7" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.whitening.WhiteningTransform -->
<g id="node19" class="node">
<title>streettransformer.whitening.WhiteningTransform</title>
<polygon fill="none" stroke="black" points="0,-1226.5 0,-1465 880,-1465 880,-1226.5 0,-1226.5"/>
<text xml:space="preserve" text-anchor="start" x="382.25" y="-1447.7" font-family="Times,serif" font-size="14.00">WhiteningTransform</text>
<polyline fill="none" stroke="black" points="0,-1440.5 880,-1440.5"/>
<text xml:space="preserve" text-anchor="start" x="398.75" y="-1423.2" font-family="Times,serif" font-size="14.00">cache</text>
<text xml:space="preserve" text-anchor="start" x="398.75" y="-1406.7" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="398.75" y="-1390.2" font-family="Times,serif" font-size="14.00">stats_dir</text>
<text xml:space="preserve" text-anchor="start" x="398.75" y="-1373.7" font-family="Times,serif" font-size="14.00">universe_name</text>
<text xml:space="preserve" text-anchor="start" x="398.75" y="-1357.2" font-family="Times,serif" font-size="14.00">vector_dim</text>
<polyline fill="none" stroke="black" points="0,-1350 880,-1350"/>
<text xml:space="preserve" text-anchor="start" x="8" y="-1332.7" font-family="Times,serif" font-size="14.00">compute_statistics(year: int, embedding_type: str, n_components: int | None, n_samples: int | None, use_cache: bool, force_recompute: bool): WhiteningStats</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1316.2" font-family="Times,serif" font-size="14.00">delete_statistics(year: int, embedding_type: str): bool</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1299.7" font-family="Times,serif" font-size="14.00">get_statistics_info(year: int, embedding_type: str): dict[str, Any] | None</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1283.2" font-family="Times,serif" font-size="14.00">list_statistics(): list[dict[str, Any]]</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1266.7" font-family="Times,serif" font-size="14.00">load_statistics(year: int, embedding_type: str): WhiteningStats</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1250.2" font-family="Times,serif" font-size="14.00">rerank_results(query_vector: np.ndarray, results: pd.DataFrame, year: int, embedding_type: str, top_k: int | None): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="8" y="-1233.7" font-family="Times,serif" font-size="14.00">transform(vectors: np.ndarray, year: int | None, embedding_type: str): np.ndarray</text>
</g>
<!-- streettransformer.config.Config&#45;&gt;streettransformer.whitening.WhiteningTransform -->
<g id="edge19" class="edge">
<title>streettransformer.config.Config&#45;&gt;streettransformer.whitening.WhiteningTransform</title>
<path fill="none" stroke="black" d="M907.95,-793.7C763.73,-813.36 592.79,-847.28 543.5,-901 502.2,-946.02 522.3,-1114.35 507,-1173.5 503.54,-1186.89 499.33,-1200.65 494.73,-1214.27"/>
<polygon fill="none" stroke="black" points="494.82,-1214 496.63,-1220.98 490.88,-1225.34 489.07,-1218.36 494.82,-1214"/>
<text xml:space="preserve" text-anchor="middle" x="560.75" y="-1032.2" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.query.mixins.DatabaseMixin&#45;&gt;streettransformer.config.Config -->
<g id="edge10" class="edge">
<title>streettransformer.query.mixins.DatabaseMixin&#45;&gt;streettransformer.config.Config</title>
<path fill="none" stroke="black" d="M1332.06,-638.88C1308.26,-653.98 1282.84,-670.11 1258.28,-685.7"/>
<polygon fill="black" stroke="black" points="1249.94,-690.99 1255.97,-681.83 1253.13,-688.96 1258.38,-685.63 1258.38,-685.63 1258.38,-685.63 1253.13,-688.96 1260.79,-689.43 1249.94,-690.99"/>
<text xml:space="preserve" text-anchor="middle" x="1320.05" y="-660.2" font-family="Times,serif" font-size="14.00" fill="green">config</text>
</g>
<!-- streettransformer.query.mixins.DatabaseMixin&#45;&gt;streettransformer.embedding_db.EmbeddingDB -->
<g id="edge12" class="edge">
<title>streettransformer.query.mixins.DatabaseMixin&#45;&gt;streettransformer.embedding_db.EmbeddingDB</title>
<path fill="none" stroke="black" d="M1469.88,-638.83C1497.54,-705.01 1540.14,-806.93 1575.28,-890.99"/>
<polygon fill="black" stroke="black" points="1579.06,-900.02 1571.05,-892.53 1577.6,-896.53 1575.2,-890.8 1575.2,-890.8 1575.2,-890.8 1577.6,-896.53 1579.35,-889.06 1579.06,-900.02"/>
<text xml:space="preserve" text-anchor="middle" x="1561.43" y="-764.95" font-family="Times,serif" font-size="14.00" fill="green">db</text>
</g>
<!-- streettransformer.embedding_db.ImageEmbedding -->
<g id="node11" class="node">
<title>streettransformer.embedding_db.ImageEmbedding</title>
<polygon fill="none" stroke="black" points="2453.62,-17 2453.62,-239 2716.38,-239 2716.38,-17 2453.62,-17"/>
<text xml:space="preserve" text-anchor="start" x="2536.25" y="-221.7" font-family="Times,serif" font-size="14.00">ImageEmbedding</text>
<polyline fill="none" stroke="black" points="2453.62,-214.5 2716.38,-214.5"/>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-197.2" font-family="Times,serif" font-size="14.00">embedding : ndarray</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-180.7" font-family="Times,serif" font-size="14.00">fusion_embedding : np.ndarray | None</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-164.2" font-family="Times,serif" font-size="14.00">image_path : str</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-147.7" font-family="Times,serif" font-size="14.00">location_id : int</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-131.2" font-family="Times,serif" font-size="14.00">location_key : str</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-114.7" font-family="Times,serif" font-size="14.00">mask_embedding : np.ndarray | None</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-98.2" font-family="Times,serif" font-size="14.00">mask_image_embedding : np.ndarray | None</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-81.7" font-family="Times,serif" font-size="14.00">mask_path : str | None</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-65.2" font-family="Times,serif" font-size="14.00">mask_stats : dict[str, Any] | None</text>
<text xml:space="preserve" text-anchor="start" x="2461.62" y="-48.7" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="2453.62,-41.5 2716.38,-41.5"/>
<text xml:space="preserve" text-anchor="start" x="2583.12" y="-24.2" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- streettransformer.faiss_index.IndexInfo -->
<g id="node12" class="node">
<title>streettransformer.faiss_index.IndexInfo</title>
<polygon fill="none" stroke="black" points="2734.62,-33.5 2734.62,-222.5 2865.38,-222.5 2865.38,-33.5 2734.62,-33.5"/>
<text xml:space="preserve" text-anchor="start" x="2773.38" y="-205.2" font-family="Times,serif" font-size="14.00">IndexInfo</text>
<polyline fill="none" stroke="black" points="2734.62,-198 2865.38,-198"/>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-180.7" font-family="Times,serif" font-size="14.00">created_at : str</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-164.2" font-family="Times,serif" font-size="14.00">file_size_mb : float</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-147.7" font-family="Times,serif" font-size="14.00">index_path : Path</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-131.2" font-family="Times,serif" font-size="14.00">index_type : str</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-114.7" font-family="Times,serif" font-size="14.00">metadata_path : Path</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-98.2" font-family="Times,serif" font-size="14.00">num_vectors : int</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-81.7" font-family="Times,serif" font-size="14.00">vector_dim : int</text>
<text xml:space="preserve" text-anchor="start" x="2742.62" y="-65.2" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="2734.62,-58 2865.38,-58"/>
<text xml:space="preserve" text-anchor="start" x="2798.12" y="-40.7" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- streettransformer.npz_cache.NPZCache&#45;&gt;streettransformer.faiss_index.FAISSIndexer -->
<g id="edge13" class="edge">
<title>streettransformer.npz_cache.NPZCache&#45;&gt;streettransformer.faiss_index.FAISSIndexer</title>
<path fill="none" stroke="black" d="M966.2,-1140.31C1000.62,-1167.93 1038.16,-1198.05 1073.59,-1226.48"/>
<polygon fill="black" stroke="black" points="1073.46,-1226.37 1080.65,-1227.01 1082.82,-1233.88 1075.64,-1233.25 1073.46,-1226.37"/>
<text xml:space="preserve" text-anchor="middle" x="1056.83" y="-1194.7" font-family="Times,serif" font-size="14.00" fill="green">cache</text>
</g>
<!-- streettransformer.npz_cache.NPZCache&#45;&gt;streettransformer.whitening.WhiteningTransform -->
<g id="edge14" class="edge">
<title>streettransformer.npz_cache.NPZCache&#45;&gt;streettransformer.whitening.WhiteningTransform</title>
<path fill="none" stroke="black" d="M706.14,-1140.31C673.54,-1165.35 638.26,-1192.46 604.37,-1218.49"/>
<polygon fill="black" stroke="black" points="604.61,-1218.3 602.29,-1225.13 595.09,-1225.61 597.42,-1218.78 604.61,-1218.3"/>
<text xml:space="preserve" text-anchor="middle" x="654.88" y="-1194.7" font-family="Times,serif" font-size="14.00" fill="green">cache</text>
</g>
<!-- streettransformer.query.queries.StateLocationQuery -->
<g id="node15" class="node">
<title>streettransformer.query.queries.StateLocationQuery</title>
<polygon fill="none" stroke="black" points="1652.75,-17 1652.75,-239 1847.25,-239 1847.25,-17 1652.75,-17"/>
<text xml:space="preserve" text-anchor="start" x="1695.62" y="-221.7" font-family="Times,serif" font-size="14.00">StateLocationQuery</text>
<polyline fill="none" stroke="black" points="1652.75,-214.5 1847.25,-214.5"/>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-197.2" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-180.7" font-family="Times,serif" font-size="14.00">db</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-164.2" font-family="Times,serif" font-size="14.00">db_connection_func : NoneType</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-147.7" font-family="Times,serif" font-size="14.00">limit : int</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-131.2" font-family="Times,serif" font-size="14.00">location_id : int</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-114.7" font-family="Times,serif" font-size="14.00">target_year : Optional[int]</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-98.2" font-family="Times,serif" font-size="14.00">use_faiss : bool</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-81.7" font-family="Times,serif" font-size="14.00">use_whitening : bool</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-65.2" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="1652.75,-58 1847.25,-58"/>
<text xml:space="preserve" text-anchor="start" x="1682.12" y="-40.7" font-family="Times,serif" font-size="14.00">execute(): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1682.12" y="-24.2" font-family="Times,serif" font-size="14.00">get_cache_key(): str</text>
</g>
<!-- streettransformer.query.queries.StateLocationQuery&#45;&gt;streettransformer.query.base.BaseQuery -->
<g id="edge5" class="edge">
<title>streettransformer.query.queries.StateLocationQuery&#45;&gt;streettransformer.query.base.BaseQuery</title>
<path fill="none" stroke="black" d="M1652.31,-234.51C1645.46,-241.8 1638.64,-249.02 1632,-256 1623.06,-265.4 1613.69,-275.17 1604.31,-284.89"/>
<polygon fill="none" stroke="black" points="1601.92,-282.33 1597.49,-291.95 1606.96,-287.19 1601.92,-282.33"/>
</g>
<!-- streettransformer.query.mixins.StateMixin -->
<g id="node16" class="node">
<title>streettransformer.query.mixins.StateMixin</title>
<polygon fill="none" stroke="black" points="1652.75,-315.75 1652.75,-438.75 1853.25,-438.75 1853.25,-315.75 1652.75,-315.75"/>
<text xml:space="preserve" text-anchor="start" x="1722.62" y="-421.45" font-family="Times,serif" font-size="14.00">StateMixin</text>
<polyline fill="none" stroke="black" points="1652.75,-414.25 1853.25,-414.25"/>
<text xml:space="preserve" text-anchor="start" x="1681.75" y="-396.95" font-family="Times,serif" font-size="14.00">location_id : int</text>
<text xml:space="preserve" text-anchor="start" x="1681.75" y="-380.45" font-family="Times,serif" font-size="14.00">target_year : Optional[int]</text>
<text xml:space="preserve" text-anchor="start" x="1681.75" y="-363.95" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="1652.75,-356.75 1853.25,-356.75"/>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-339.45" font-family="Times,serif" font-size="14.00">get_query_embedding_filter(): str</text>
<text xml:space="preserve" text-anchor="start" x="1660.75" y="-322.95" font-family="Times,serif" font-size="14.00">get_temporal_key(): str</text>
</g>
<!-- streettransformer.query.queries.StateLocationQuery&#45;&gt;streettransformer.query.mixins.StateMixin -->
<g id="edge6" class="edge">
<title>streettransformer.query.queries.StateLocationQuery&#45;&gt;streettransformer.query.mixins.StateMixin</title>
<path fill="none" stroke="black" d="M1751.34,-239.25C1751.6,-261.2 1751.88,-283.73 1752.12,-304.01"/>
<polygon fill="none" stroke="black" points="1748.62,-303.87 1752.24,-313.83 1755.62,-303.79 1748.62,-303.87"/>
</g>
<!-- streettransformer.query.queries.StateTextQuery -->
<g id="node17" class="node">
<title>streettransformer.query.queries.StateTextQuery</title>
<polygon fill="none" stroke="black" points="1422.75,-0.5 1422.75,-255.5 1623.25,-255.5 1623.25,-0.5 1422.75,-0.5"/>
<text xml:space="preserve" text-anchor="start" x="1480.25" y="-238.2" font-family="Times,serif" font-size="14.00">StateTextQuery</text>
<polyline fill="none" stroke="black" points="1422.75,-231 1623.25,-231"/>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-213.7" font-family="Times,serif" font-size="14.00">clip_encoder</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-197.2" font-family="Times,serif" font-size="14.00">config</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-180.7" font-family="Times,serif" font-size="14.00">db</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-164.2" font-family="Times,serif" font-size="14.00">db_connection_func : NoneType</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-147.7" font-family="Times,serif" font-size="14.00">limit : int</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-131.2" font-family="Times,serif" font-size="14.00">text_query : str</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-114.7" font-family="Times,serif" font-size="14.00">use_faiss : bool</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-98.2" font-family="Times,serif" font-size="14.00">use_whitening : bool</text>
<text xml:space="preserve" text-anchor="start" x="1433.75" y="-81.7" font-family="Times,serif" font-size="14.00">year : Optional[int]</text>
<polyline fill="none" stroke="black" points="1422.75,-74.5 1623.25,-74.5"/>
<text xml:space="preserve" text-anchor="start" x="1430.75" y="-57.2" font-family="Times,serif" font-size="14.00">execute(): pd.DataFrame</text>
<text xml:space="preserve" text-anchor="start" x="1430.75" y="-40.7" font-family="Times,serif" font-size="14.00">get_cache_key(): str</text>
<text xml:space="preserve" text-anchor="start" x="1430.75" y="-24.2" font-family="Times,serif" font-size="14.00">get_query_embedding_filter(): str</text>
<text xml:space="preserve" text-anchor="start" x="1430.75" y="-7.7" font-family="Times,serif" font-size="14.00">get_temporal_key(): str</text>
</g>
<!-- streettransformer.query.queries.StateTextQuery&#45;&gt;streettransformer.query.base.BaseQuery -->
<g id="edge7" class="edge">
<title>streettransformer.query.queries.StateTextQuery&#45;&gt;streettransformer.query.base.BaseQuery</title>
<path fill="none" stroke="black" d="M1518.89,-255.88C1518.61,-264.61 1518.33,-273.31 1518.06,-281.81"/>
<polygon fill="none" stroke="black" points="1514.56,-281.65 1517.73,-291.76 1521.56,-281.88 1514.56,-281.65"/>
</g>
<!-- streettransformer.query.queries.StateTextQuery&#45;&gt;streettransformer.query.mixins.StateMixin -->
<g id="edge8" class="edge">
<title>streettransformer.query.queries.StateTextQuery&#45;&gt;streettransformer.query.mixins.StateMixin</title>
<path fill="none" stroke="black" d="M1623.55,-237.09C1645.73,-260.94 1668.65,-285.57 1688.92,-307.37"/>
<polygon fill="none" stroke="black" points="1686.15,-309.52 1695.52,-314.46 1691.28,-304.76 1686.15,-309.52"/>
</g>
<!-- streettransformer.whitening.WhiteningStats -->
<g id="node18" class="node">
<title>streettransformer.whitening.WhiteningStats</title>
<polygon fill="none" stroke="black" points="2883.25,-41.75 2883.25,-214.25 3056.75,-214.25 3056.75,-41.75 2883.25,-41.75"/>
<text xml:space="preserve" text-anchor="start" x="2928" y="-196.95" font-family="Times,serif" font-size="14.00">WhiteningStats</text>
<polyline fill="none" stroke="black" points="2883.25,-189.75 3056.75,-189.75"/>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-172.45" font-family="Times,serif" font-size="14.00">components : ndarray</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-155.95" font-family="Times,serif" font-size="14.00">created_at : str</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-139.45" font-family="Times,serif" font-size="14.00">explained_variance : ndarray</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-122.95" font-family="Times,serif" font-size="14.00">mean : ndarray</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-106.45" font-family="Times,serif" font-size="14.00">n_components : int</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-89.95" font-family="Times,serif" font-size="14.00">n_samples : int</text>
<text xml:space="preserve" text-anchor="start" x="2891.25" y="-73.45" font-family="Times,serif" font-size="14.00">year : int</text>
<polyline fill="none" stroke="black" points="2883.25,-66.25 3056.75,-66.25"/>
<text xml:space="preserve" text-anchor="start" x="2968.12" y="-48.95" font-family="Times,serif" font-size="14.00"> </text>
</g>
</g>
</svg>
